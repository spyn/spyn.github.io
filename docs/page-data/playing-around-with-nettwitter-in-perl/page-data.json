{"componentChunkName":"component---src-templates-blog-post-js","path":"/playing-around-with-nettwitter-in-perl/","result":{"data":{"site":{"siteMetadata":{"title":"360 Degrees of Awesome","author":"Mattie Ellins"}},"markdownRemark":{"id":"8c24bfff-6d06-5995-98be-fdaace2a15cb","excerpt":"Here are some perl recipes that I’ve written that helps interface with\nTwitter and run some basic tasks. You will need to create a Twitter\napplication, generate…","html":"<p>Here are some perl recipes that I’ve written that helps interface with\nTwitter and run some basic tasks. You will need to create a Twitter\napplication, generate a consumer key and twitter tokens (with read/write\naccess).</p>\n<p>This first piece of code needs to be on all the scripts below. It sets\nup the <a href=\"http://search.cpan.org/dist/Net-Twitter/lib/Net/Twitter.pod\">Net::Twitter</a> object and authenticates.</p>\n<h3>Authentication</h3>\n<div class=\"gatsby-highlight\" data-language=\"perl\"><pre class=\"language-perl\"><code class=\"language-perl\"><span class=\"token comment\">#!/usr/bin/perl</span>\n<span class=\"token keyword\">use</span> Net<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Twitter<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> Net<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Twitter<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Core<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> Scalar<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Util <span class=\"token string\">'blessed'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> List<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Util<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$nt</span> <span class=\"token operator\">=</span> Net<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Twitter<span class=\"token operator\">-></span>new<span class=\"token punctuation\">(</span>legacy <span class=\"token operator\">=></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$ntc</span> <span class=\"token operator\">=</span> Net<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Twitter<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Core<span class=\"token operator\">-></span>new<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#\\_with\\_traits(traits => [qw/API::Search/]);</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$consumer</span><span class=\"token operator\">\\</span>_key <span class=\"token operator\">=</span> <span class=\"token string\">\"CONSUMER KEY\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$consumer</span><span class=\"token operator\">\\</span>_secret <span class=\"token operator\">=</span> <span class=\"token string\">\"CONSUMER SECRET\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$token</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"TWITTER TOKEN\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$token</span><span class=\"token operator\">\\</span>_secret <span class=\"token operator\">=</span> <span class=\"token string\">\"TWITTER TOKEN SECRET\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$nt</span> <span class=\"token operator\">=</span> Net<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Twitter<span class=\"token operator\">-></span>new<span class=\"token punctuation\">(</span>\n    traits <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string\">qw/OAuth API::REST API::Search/</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    consumer<span class=\"token operator\">\\</span>_key <span class=\"token operator\">=></span> <span class=\"token variable\">$consumer</span><span class=\"token operator\">\\</span>_key<span class=\"token punctuation\">,</span>\n    consumer<span class=\"token operator\">\\</span>_secret <span class=\"token operator\">=></span> <span class=\"token variable\">$consumer</span><span class=\"token operator\">\\</span>_secret<span class=\"token punctuation\">,</span>\n    access<span class=\"token operator\">\\</span>_token <span class=\"token operator\">=></span> <span class=\"token variable\">$token</span><span class=\"token punctuation\">,</span>\n    access<span class=\"token operator\">\\</span>_token<span class=\"token operator\">\\</span>_secret <span class=\"token operator\">=></span> <span class=\"token variable\">$token</span><span class=\"token operator\">\\</span>_secret<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Unfollow users that do not follow you back</h3>\n<p>The first one, will unfollow Twitter users that do not follow you back.\nKeep in mind that you have a limit of 350 API calls an hour, in able to\ndo these actions. The script has been adjusted to end when it reaches\nless than 50 calls left.</p>\n<div class=\"gatsby-highlight\" data-language=\"perl\"><pre class=\"language-perl\"><code class=\"language-perl\"><span class=\"token keyword\">my</span> <span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>show<span class=\"token operator\">\\</span>_user<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> screen<span class=\"token operator\">\\</span>_name <span class=\"token operator\">=></span> <span class=\"token string\">'YOUR USERNAME'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$uid</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$r</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>friends<span class=\"token operator\">\\</span>_ids<span class=\"token punctuation\">(</span><span class=\"token variable\">$uid</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$apicalls</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># Do this, so we don't always get the same IDs, mix it up a bit.</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">@friends</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>sort <span class=\"token punctuation\">{</span>int<span class=\"token punctuation\">(</span>rand<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span> <span class=\"token variable\">@</span><span class=\"token punctuation\">{</span><span class=\"token variable\">$r</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span>ids<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span> <span class=\"token keyword\">my</span> <span class=\"token variable\">$id</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">@friends</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$fs</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>follows<span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$uid</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$fs</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">print</span> <span class=\"token string\">\"[\\*] \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">print</span> <span class=\"token string\">\"[!] \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>unfollow<span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token variable\">$apicalls</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>rate<span class=\"token operator\">\\</span>_limit<span class=\"token operator\">\\</span>_status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">print</span> <span class=\"token string\">\" [API:\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$apicalls</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'remaining\\_hits'</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">.</span> <span class=\"token string\">\"]\\\\n\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$apicalls</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'remaining\\_hits'</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">last</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span> \n<span class=\"token punctuation\">}</span> \n<span class=\"token keyword\">print</span> <span class=\"token string\">\"Remember, you can only run this every hour. $apicalls-> {'remaining\\_hits'} API calls left.\\\\n\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Follower check</h3>\n<p>The following piece of code keeps a hash of people who are currently\nfollowing you and checks if they still are following you. If they’re\nnot, it will send a notification to my phone that a person has\nunfollowed me. I’m using NotifyMyAndroid for notifications. I have a\ncronjob that runs this script every hour.</p>\n<div class=\"gatsby-highlight\" data-language=\"perl\"><pre class=\"language-perl\"><code class=\"language-perl\"><span class=\"token keyword\">my</span> <span class=\"token variable\">$f</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$follower</span><span class=\"token operator\">\\</span>_file <span class=\"token operator\">=</span> <span class=\"token string\">'./followers.hash'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$unfollow</span><span class=\"token operator\">\\</span>_file <span class=\"token operator\">=</span> <span class=\"token string\">'./unfollow.hash'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-e</span> <span class=\"token variable\">$follower</span><span class=\"token operator\">\\</span>_file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$f</span> <span class=\"token operator\">=</span> retrieve<span class=\"token punctuation\">(</span><span class=\"token variable\">$follower</span><span class=\"token operator\">\\</span>_file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">@ids</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">my</span> <span class=\"token variable\">$cursor</span> <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">my</span> <span class=\"token variable\">$r</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$cursor</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$cursor</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$r</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">next</span><span class=\"token operator\">\\</span>_cursor<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$r</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>followers<span class=\"token operator\">\\</span>_ids<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> screen<span class=\"token operator\">\\</span>_name <span class=\"token operator\">=></span> <span class=\"token string\">'YOUR TWITTER USERNAME'</span><span class=\"token punctuation\">,</span>\n    cursor <span class=\"token operator\">=></span> <span class=\"token variable\">$cursor</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    push <span class=\"token variable\">@ids</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">@</span><span class=\"token punctuation\">{</span><span class=\"token variable\">$r</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span>ids<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$flw</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$cnt</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$uinfo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">my</span> <span class=\"token variable\">$unfollowers</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span> <span class=\"token variable\">$fid</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">@</span><span class=\"token punctuation\">{</span><span class=\"token variable\">$f</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">foreach</span> <span class=\"token variable\">$tid</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">@ids</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$tid</span> <span class=\"token operator\">eq</span> <span class=\"token variable\">$fid</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$flw</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$tid</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">next</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$flw</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        try <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$uinfo</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>show<span class=\"token operator\">\\</span>_user<span class=\"token punctuation\">(</span><span class=\"token variable\">$fid</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$uinfo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>friendship<span class=\"token operator\">\\</span>_exists<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> screen<span class=\"token operator\">\\</span>_name<span class=\"token operator\">\\</span>_a <span class=\"token operator\">=></span> <span class=\"token variable\">$uinfo</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'screen\\_name'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> screen<span class=\"token operator\">\\</span>_name<span class=\"token operator\">\\</span>_b <span class=\"token operator\">=></span> <span class=\"token string\">'YOUR TWITTER USERNAME'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token variable\">$unfollowers</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token variable\">$fid</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$uinfo</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">print</span> <span class=\"token string\">\"U: \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$uinfo</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'screen\\_name'</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">.</span> <span class=\"token string\">\" ($fid)\\\\n\"</span><span class=\"token punctuation\">;</span> nma<span class=\"token operator\">\\</span>_notify<span class=\"token punctuation\">(</span><span class=\"token variable\">$uinfo</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token variable\">$cnt</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">print</span> <span class=\"token string\">\"F: \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$uinfo</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'screen\\_name'</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">.</span> <span class=\"token string\">\" ($fid)\\\\n\"</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">print</span> <span class=\"token string\">\"X: Error?\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        catch <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">print</span> <span class=\"token string\">\"$fid has been deleted.\\\\n\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$unfollowers</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token variable\">$fid</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$fid</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    store <span class=\"token operator\">\\</span><span class=\"token operator\">\\</span><span class=\"token variable\">@ids</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$follower</span><span class=\"token operator\">\\</span>_file<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$cnt</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">print</span> <span class=\"token string\">\"- Found $cnt unfollowers.\\\\n\"</span><span class=\"token punctuation\">;</span>\n        store <span class=\"token variable\">$unfollowers</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$unfollow</span><span class=\"token operator\">\\</span>_file<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">#print \"- No unfollows\\\\n\";</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\"><span class=\"token keyword\">sub</span> nma</span><span class=\"token operator\">\\</span>_notify <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> shift<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$userAgent</span> <span class=\"token operator\">=</span> LWP<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>UserAgent<span class=\"token operator\">-></span>new<span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$userAgent</span><span class=\"token operator\">-></span>agent<span class=\"token punctuation\">(</span><span class=\"token string\">\"NMAScript/1.0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$userAgent</span><span class=\"token operator\">-></span>env<span class=\"token operator\">\\</span>_proxy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$requestURL</span> <span class=\"token operator\">=</span> sprintf<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://nma.usk.bz/publicapi/notify?apikey=%s&amp;application=%s&amp;event=%s&amp;description=%s&amp;priority=%d\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"NMA API KEY\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Twitter\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Unfollowed on YOUR USERNAME by \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'screen\\_name'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"You were unfollowed by \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">.</span> <span class=\"token string\">\" \\\\nTheir last status: \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">}</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$request</span> <span class=\"token operator\">=</span> HTTP<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Request<span class=\"token operator\">-></span>new<span class=\"token punctuation\">(</span>GET <span class=\"token operator\">=></span> <span class=\"token variable\">$requestURL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$userAgent</span><span class=\"token operator\">-></span>request<span class=\"token punctuation\">(</span><span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$response</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Hashtag Followback</h3>\n<p>There’s a thing on Twitter called “FOLLOWBACK” or “TEAMFOLLOWBACK”,\nwhere Twitter users follow back when you follow them. They don’t always\nfollow back so there is a bit of risk involved, if you are inclined to\ngrow your follower count (it matters for some people, I guess?)</p>\n<div class=\"gatsby-highlight\" data-language=\"perl\"><pre class=\"language-perl\"><code class=\"language-perl\"><span class=\"token keyword\">my</span> <span class=\"token variable\">$count</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">do</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$sleep</span> <span class=\"token operator\">=</span> <span class=\"token number\">120</span><span class=\"token operator\">+</span>rand<span class=\"token punctuation\">(</span><span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$search</span><span class=\"token operator\">\\</span>_term <span class=\"token operator\">=</span> <span class=\"token string\">\"TEAMFOLLOWBACK OR FOLLOWBACK\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">my</span> <span class=\"token variable\">$r</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>search<span class=\"token punctuation\">(</span><span class=\"token variable\">$search</span><span class=\"token operator\">\\</span>_term<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token keyword\">my</span> <span class=\"token variable\">$status</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">@</span><span class=\"token punctuation\">{</span><span class=\"token variable\">$r</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span>results<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">my</span> <span class=\"token variable\">$tweeter</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$status</span><span class=\"token operator\">-></span><span class=\"token punctuation\">{</span>from<span class=\"token operator\">\\</span>_user<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\"># Don't bother if we're already following them</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>friendship<span class=\"token operator\">\\</span>_exists<span class=\"token punctuation\">(</span><span class=\"token string\">'YOUR TWITTER NAME'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$tweeter</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">my</span> <span class=\"token variable\">$cf</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$nt</span><span class=\"token operator\">-></span>create<span class=\"token operator\">\\</span>_friend<span class=\"token punctuation\">(</span><span class=\"token variable\">$tweeter</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$count</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">print</span> <span class=\"token string\">\"+ \"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$tweeter</span> <span class=\"token operator\">.</span> <span class=\"token string\">\"\\\\n\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">print</span> <span class=\"token string\">\"Added $count ...sleeping\\\\n\"</span><span class=\"token punctuation\">;</span>\n    sleep <span class=\"token punctuation\">(</span><span class=\"token variable\">$sleep</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Playing around with Net::Twitter in PERL","date":"2012, Jul 07","tags":["twitter","code","perl"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVQoz4XQz0sCURAHcP81Idx1l/WpdekW/bhFQXePXexglwplf7yXhhVtJKFQ4dYpcqNT0CG8aIfAGXdtUWiNfLUEoagFw1xmPjDfCcUo/lGEoqTjkultlL3Zg46sAxmahsa3f3qCYZJhVIPVM1c1bzN7p9vleqLQUQyYjBWKsg5JhrKOMzkQtVZEd3evGulMoXR5v2NU1s89QW0RNoYVinGGC0ftcLa1fOLsP/RSF2/JfJvVnKJpWdf2YfVpvugOXz6EjeDUx9d+9q5r1d8553bTlzWIMSdVgXSlsWK6UR0nZyYURQ3sps859z8GnPNcrRvOQiJIjhJ1pdFvjeA4w4gKm1VvEECOvc/FYycALBgRCr9Rpz5s68Z7hn7txV8ruYI6AUzHBhKGc3kUNBC1f+Q3/gKvEmDLGubHqgAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/2749ecf955ecfa418b57523c8a071aad/743e0/twitter-perl.png","srcSet":"/static/2749ecf955ecfa418b57523c8a071aad/4a226/twitter-perl.png 750w,\n/static/2749ecf955ecfa418b57523c8a071aad/743e0/twitter-perl.png 785w","sizes":"100vw"},"sources":[{"srcSet":"/static/2749ecf955ecfa418b57523c8a071aad/e0616/twitter-perl.avif 750w,\n/static/2749ecf955ecfa418b57523c8a071aad/bd3bc/twitter-perl.avif 785w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/2749ecf955ecfa418b57523c8a071aad/7d222/twitter-perl.webp 750w,\n/static/2749ecf955ecfa418b57523c8a071aad/6e09c/twitter-perl.webp 785w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.43312101910828027}}}}}},"pageContext":{"slug":"/playing-around-with-nettwitter-in-perl/","previous":{"fields":{"slug":"/automate-my-everythings/"},"frontmatter":{"title":"Automate my everythings","tags":["home-automation","systems"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVQoz4WPTUsCURiFr6NQkQrVqpaBMINZBDZGEGVkgRL9AQMZiPo5QVkzd8axD6KS8GP6XARF9AvaRNRCaNGqfbU58d5RSUuEh8PLfd/DOZcxAy1IHD6T8Ap8DeWtl+yvmWXBtups/hqyncwSx0gBU2XMOJh1MHeGuGD+HLESmN7G7DFo12PBqeLjE0evKFeRf0alCv6E6zdsPFK4xP8zS8LcZeHwBQ/vkI+xdo+4A+0W0xWs3mHxgsp7uYhpra0THh1DBxjcB9vGwB78Nvry8Odqynaam7s2nwm1hLFT+phSwESRcmJFhMUcLdJKLWFcqHzSnOwx0JsjAjYlBIW6BG16D9ro36UiARvdVsNsoYYp4PWhHe5xTnCVznTkMp25WcksLWvDSS2c0pSUJicJ9p0IdeQrEcJCaD0qRyLK5Kii1vkBAYFmFjWeqgkAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/31f8ca22063ee5e2c5975414f7ae917d/b5380/ifttt-banner.png","srcSet":"/static/31f8ca22063ee5e2c5975414f7ae917d/5b584/ifttt-banner.png 750w,\n/static/31f8ca22063ee5e2c5975414f7ae917d/c1f05/ifttt-banner.png 1080w,\n/static/31f8ca22063ee5e2c5975414f7ae917d/b5380/ifttt-banner.png 1200w","sizes":"100vw"},"sources":[{"srcSet":"/static/31f8ca22063ee5e2c5975414f7ae917d/73e0d/ifttt-banner.webp 750w,\n/static/31f8ca22063ee5e2c5975414f7ae917d/9fede/ifttt-banner.webp 1080w,\n/static/31f8ca22063ee5e2c5975414f7ae917d/81547/ifttt-banner.webp 1200w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.525}}}}},"next":{"fields":{"slug":"/2014/"},"frontmatter":{"title":"Hello 2014","tags":["getoutsideidiot","goals"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAcyFVyeJK//EABoQAAICAwAAAAAAAAAAAAAAAAABERMCAxL/2gAIAQEAAQUCrRWh64O8iWNs/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQIBAT8Bp//EABkQAQADAQEAAAAAAAAAAAAAAAABESExQf/aAAgBAQAGPwLqdertOuv/xAAaEAACAwEBAAAAAAAAAAAAAAABEQAhMUFR/9oACAEBAAE/IaW+POQiLHRuV2WXkYmsZD2JQtP/2gAMAwEAAgADAAAAEDc//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEh/9oACAEDAQE/EMV//8QAGBEBAAMBAAAAAAAAAAAAAAAAAQARIUH/2gAIAQIBAT8QDthdbP/EAB0QAQEAAwACAwAAAAAAAAAAAAERACExQVFh0fH/2gAIAQEAAT8QudYSJsdZ+ecIaiAHu/WaUipDj4xYyjtrhrKKRUXfe4uFAIV4Z//Z"},"images":{"fallback":{"src":"/static/c9c8be1d91eb46d6908b417a869e5237/c0a09/2014.jpg","srcSet":"/static/c9c8be1d91eb46d6908b417a869e5237/c0a09/2014.jpg 640w","sizes":"100vw"},"sources":[{"srcSet":"/static/c9c8be1d91eb46d6908b417a869e5237/ce710/2014.webp 640w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.709375}}}}}}},"staticQueryHashes":["2478211480","63159454"]}